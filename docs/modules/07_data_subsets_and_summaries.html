<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.353">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Gabriel I. Cook">
<meta name="dcterms.date" content="2023-09-03">

<title>PSYC167 - Data subsets and summaries</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../site_libs/clipboard/clipboard.min.js"></script>
<script src="../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../site_libs/quarto-search/fuse.min.js"></script>
<script src="../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../">
<script src="../site_libs/quarto-html/quarto.js"></script>
<script src="../site_libs/quarto-html/popper.min.js"></script>
<script src="../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../site_libs/quarto-html/anchor.min.js"></script>
<link href="../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../site_libs/quarto-html/quarto-syntax-highlighting-dark.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="dark">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit"
  }
}</script>
<script src="https://kit.fontawesome.com/78ddb093ea.js" crossorigin="anonymous"></script>


<link rel="stylesheet" href="../css/nav.css">
<link rel="stylesheet" href="../css/styles.css">
</head>

<body class="nav-sidebar floating nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg navbar-dark ">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container">
    <a class="navbar-brand" href="../index.html">
    <span class="navbar-title"><strong>PSYC167</strong></span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link" href="../index.html" rel="" target="">
 <span class="menu-text"><strong>Home</strong></span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link active" href="../syllabus/syllabus.html" rel="" target="" aria-current="page">
 <span class="menu-text"><strong>Syllabus</strong></span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../modules/index.html" rel="" target="">
 <span class="menu-text"><strong>Modules</strong></span></a>
  </li>  
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-homework" role="button" data-bs-toggle="dropdown" aria-expanded="false" rel="" target="">
 <span class="menu-text"><strong>Homework</strong></span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-homework">    
        <li>
    <a class="dropdown-item" href="../homework/EX01.pdf" rel="" target="">
 <span class="dropdown-text">HW 1</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../homework/EX02.Rmd" rel="" target="">
 <span class="dropdown-text">HW 2</span></a>
  </li>  
    </ul>
  </li>
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-data" role="button" data-bs-toggle="dropdown" aria-expanded="false" rel="" target="">
 <span class="menu-text"><strong>Data</strong></span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-data">    
        <li>
    <a class="dropdown-item" href="https://github.com/slicesofdata/dataviz23/raw/main/data/cms-top-all-time-2023-swim.zip" rel="" target="">
 <span class="dropdown-text">cms-top-all-time-2023-swim.xlsx</span></a>
  </li>  
    </ul>
  </li>
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-cheatsheets" role="button" data-bs-toggle="dropdown" aria-expanded="false" rel="" target="">
 <span class="menu-text"><strong>Cheatsheets</strong></span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-cheatsheets">    
        <li>
    <a class="dropdown-item" href="../cheatsheets/rmarkdown-2.0.pdf" rel="" target="">
 <span class="dropdown-text">RMarkdown</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="https://www.rstudio.com/wp-content/uploads/2015/02/data-wrangling-cheatsheet.pdf" rel="" target="">
 <span class="dropdown-text">Data Wrangling with {dplyr} and {tidyr}</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="https://rstudio.github.io/cheatsheets/html/quarto.html" rel="" target="">
 <span class="dropdown-text">Quarto (Publish and Share)</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="https://rstudio.github.io/cheatsheets/html/strings.html" rel="" target="">
 <span class="dropdown-text">String Manipulation with {stringr}</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="https://rstudio.github.io/cheatsheets/html/data-import.html" rel="" target="">
 <span class="dropdown-text">Reading and Writing Data with {readr}</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../cheatsheets/Data_Science_With_R_Workflow.pdf" rel="" target="">
 <span class="dropdown-text">Data Science with RWorkflow</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="https://rstudio.github.io/cheatsheets/" rel="" target="">
 <span class="dropdown-text">More Cheatsheets Here</span></a>
  </li>  
    </ul>
  </li>
  <li class="nav-item">
    <a class="nav-link" href="../resources/dataviz_tools.html" rel="" target="">
 <span class="menu-text"><strong>DataViz Tools</strong></span></a>
  </li>  
</ul>
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item compact">
    <a class="nav-link" href="https://github.com/slicesofdata/dataviz23" rel="" target=""><i class="bi bi-github" role="img" aria-label="GitHub">
</i> 
 <span class="menu-text"></span></a>
  </li>  
</ul>
            <div class="quarto-navbar-tools">
</div>
          </div> <!-- /navcollapse -->
      </div> <!-- /container-fluid -->
    </nav>
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
      <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="../modules/index.html">Modules</a></li><li class="breadcrumb-item"><a href="../modules/07_data_subsets_and_summaries.html"><strong>Data subsets and summaries</strong></a></li></ol></nav>
      <a class="flex-grow-1" role="button" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
      </a>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal sidebar-navigation floating overflow-auto">
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../syllabus/syllabus.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><strong>Syllabus</strong></span></a>
  </div>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="../modules/index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Modules</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-1" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../modules/01_installing_r_and_rstudio.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><strong>Installing R &amp; RStudio</strong></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../modules/02_graphical_perception.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><strong>Graphical perception</strong></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../modules/03_reading_data_files.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><strong>Reading data files</strong></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../modules/04_data_frame_manipulation_and_wrangling.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><strong>Data frame manipulation and wrangling</strong></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../modules/07_data_subsets_and_summaries.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text"><strong>Data subsets and summaries</strong></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../modules/08_ggplot_and_the_grammar_of_graphics.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><strong>{ggplot} and the grammar of graphics</strong></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../modules/09_visualizing_amounts.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><strong>visualizing amounts</strong></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../modules/10_spatial_position_and_adjustment.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><strong>Spatial position and adjustment</strong></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../modules/11_considerations_in_data_visualization.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><strong>Considerations in data visualization</strong></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../modules/12_visualizing_associations.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><strong>Visualizing associations</strong></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../modules/13_color_scales_and_palettes.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><strong>Color scales and palettes</strong></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../modules/14_statistical_transformations.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><strong>Statistical transformations</strong></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../modules/15_coordinates_axes_and_position_scales.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><strong>Coordinates, axes, and position scales</strong></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../modules/16_histograms_and_density_plots.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><strong>Histograms and density plots</strong></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../modules/17_visualizing_more_distributions.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><strong>Visualizing more distributions</strong></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../modules/18_visualizing_uncertainty.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><strong>Visualizing uncertainty</strong></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../modules/19_visualizing_trends.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><strong>Visualizing trends</strong></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../modules/20_legends_and_arrangement.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><strong>Legends and arrangement</strong></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../modules/21_annotation_and_text.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><strong>Annotation and text</strong></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../modules/22_designing_perceptually_efficient_visualizations.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><strong>Designing perceptually-efficient visualizations</strong></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../modules/23_attentional_control.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><strong>Attentional control</strong></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../modules/24_multi_panel_plots_faceting.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><strong>Multi-panel plots: Faceting</strong></span></a>
  </div>
</li>
          <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="../modules/Introduction/index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">junk</span></a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" aria-expanded="false" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-2" class="collapse list-unstyled sidebar-section depth2 ">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../modules/Introduction/introduction.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Introduction</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../modules/Introduction/introduction2.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Introduction2</span></a>
  </div>
</li>
      </ul>
  </li>
      </ul>
  </li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#overview" id="toc-overview" class="nav-link active" data-scroll-target="#overview"><strong>Overview</strong></a></li>
  <li><a href="#to-do" id="toc-to-do" class="nav-link" data-scroll-target="#to-do"><strong>To Do</strong></a>
  <ul class="collapse">
  <li><a href="#readings" id="toc-readings" class="nav-link" data-scroll-target="#readings"><strong>Readings</strong></a></li>
  <li><a href="#task" id="toc-task" class="nav-link" data-scroll-target="#task"><strong>Task</strong></a></li>
  <li><a href="#libraries" id="toc-libraries" class="nav-link" data-scroll-target="#libraries"><strong>Libraries</strong></a></li>
  <li><a href="#external-functions" id="toc-external-functions" class="nav-link" data-scroll-target="#external-functions"><strong>External Functions</strong></a></li>
  <li><a href="#libraries-1" id="toc-libraries-1" class="nav-link" data-scroll-target="#libraries-1"><strong>Libraries</strong></a></li>
  </ul></li>
  <li><a href="#loading-and-looking-at-data" id="toc-loading-and-looking-at-data" class="nav-link" data-scroll-target="#loading-and-looking-at-data"><strong>Loading and Looking at Data</strong></a></li>
  <li><a href="#modifying-a-data-frame-or-tibble-using-dplyr" id="toc-modifying-a-data-frame-or-tibble-using-dplyr" class="nav-link" data-scroll-target="#modifying-a-data-frame-or-tibble-using-dplyr"><strong>Modifying a Data Frame or Tibble Using {dplyr}</strong></a>
  <ul class="collapse">
  <li><a href="#creating-a-new-variable" id="toc-creating-a-new-variable" class="nav-link" data-scroll-target="#creating-a-new-variable"><strong>Creating a new variable</strong></a></li>
  <li><a href="#modifying-a-new-variable" id="toc-modifying-a-new-variable" class="nav-link" data-scroll-target="#modifying-a-new-variable"><strong>Modifying a new variable</strong></a>
  <ul class="collapse">
  <li><a href="#set-an-existing-variable-equal-to-a-constant" id="toc-set-an-existing-variable-equal-to-a-constant" class="nav-link" data-scroll-target="#set-an-existing-variable-equal-to-a-constant"><em>Set an existing variable equal to a constant</em></a></li>
  <li><a href="#set-an-existing-variable-equal-to-another-value" id="toc-set-an-existing-variable-equal-to-another-value" class="nav-link" data-scroll-target="#set-an-existing-variable-equal-to-another-value"><em>Set an existing variable equal to another value</em></a></li>
  <li><a href="#converting-variables-that-are-time-related-using-lubridate" id="toc-converting-variables-that-are-time-related-using-lubridate" class="nav-link" data-scroll-target="#converting-variables-that-are-time-related-using-lubridate"><strong>Converting variables that are time related using {lubridate}</strong></a></li>
  </ul></li>
  </ul></li>
  <li><a href="#quick-summary-using-base-r" id="toc-quick-summary-using-base-r" class="nav-link" data-scroll-target="#quick-summary-using-base-r"><strong>Quick Summary Using <code>base R</code></strong></a></li>
  <li><a href="#summarizing-data-using-dplyr" id="toc-summarizing-data-using-dplyr" class="nav-link" data-scroll-target="#summarizing-data-using-dplyr"><strong>Summarizing Data Using {dplyr}</strong></a></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title"><strong>Data subsets and summaries</strong></h1>
</div>



<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-contents">
             <p>Gabriel I. Cook </p>
          </div>
  </div>
    
    <div>
    <div class="quarto-title-meta-heading">Published</div>
    <div class="quarto-title-meta-contents">
      <p class="date">September 3, 2023</p>
    </div>
  </div>
  
    
  </div>
  

</header>

<div class="callout callout-style-default callout-important callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Under construction.
</div>
</div>
<div class="callout-body-container callout-body">
<p>This page is a work in progress and may contain areas that need more detail or that required syntactical, grammatical, and typographical changes. If you find some part requiring some editing, please let me know so I can fix it for you.</p>
</div>
</div>
<section id="overview" class="level1">
<h1><strong>Overview</strong></h1>
<p>This module demonstrates how to use <strong>{dplyr}</strong> to subset data, mutate variables, and summarize variables in data frames. Many data summaries involve creating group-level statistics so we will also cover grouping across variables.</p>
</section>
<section id="to-do" class="level1">
<h1><strong>To Do</strong></h1>
<section id="readings" class="level2">
<h2 class="anchored" data-anchor-id="readings"><strong>Readings</strong></h2>
<ul>
<li><a href="https://r4ds.had.co.nz/workflow-basics.html">R Workflow Basics</a></li>
<li><a href="https://r4ds.had.co.nz/transform.html#introduction-2">General Wrangling: Sections 5.1 up through 5.5</a></li>
</ul>
</section>
<section id="task" class="level2">
<h2 class="anchored" data-anchor-id="task"><strong>Task</strong></h2>
<ul>
<li></li>
</ul>
</section>
<section id="libraries" class="level2">
<h2 class="anchored" data-anchor-id="libraries"><strong>Libraries</strong></h2>
<ul>
<li><strong>{here}</strong>: 1.0.1: for path management</li>
<li><strong>{dplyr}</strong> 1.1.2: for selecting, filtering, and mutating</li>
<li><strong>{magrittr}</strong> 2.0.3: for code clarity and piping data frame objects</li>
<li><strong>{lubridate}</strong> 1.9.2: for handling date and time vectors</li>
</ul>
</section>
<section id="external-functions" class="level2">
<h2 class="anchored" data-anchor-id="external-functions"><strong>External Functions</strong></h2>
<p>Provided in class:</p>
<p><code>view_html()</code>: for viewing data frames in html format, from <code>/r/my_functions.R</code></p>
<p>You can use this in your own workspace but I am having a challenge rendering this of the website, so I’ll default to <code>print()</code> on occasion.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="fu">source</span>(here<span class="sc">::</span><span class="fu">here</span>(<span class="st">"r"</span>, <span class="st">"my_functions.R"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="libraries-1" class="level2">
<h2 class="anchored" data-anchor-id="libraries-1"><strong>Libraries</strong></h2>
<p>We will work with a few different libraries for data manipulation. Let’s load them into our work space using <code>library()</code>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(magrittr)</span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(dplyr)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>
Attaching package: 'dplyr'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>The following objects are masked from 'package:stats':

    filter, lag</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>The following objects are masked from 'package:base':

    intersect, setdiff, setequal, union</code></pre>
</div>
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(stringr)</span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(lubridate)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>
Attaching package: 'lubridate'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>The following objects are masked from 'package:base':

    date, intersect, setdiff, union</code></pre>
</div>
</div>
</section>
</section>
<section id="loading-and-looking-at-data" class="level1">
<h1><strong>Loading and Looking at Data</strong></h1>
<p>In order to perform any data summary, you need data. We will use the file name <code>"cms-top-all-time-2023-swim.csv"</code> and <strong>{here}</strong> to help with the path that we will pass that to <code>readr::read_csv()</code>. When we will assign the returned data frame to an object named <code>DAT</code>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a>file_name <span class="ot">&lt;-</span> <span class="st">"cms-top-all-time-2023-swim.csv"</span></span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a>DAT <span class="ot">&lt;-</span> readr<span class="sc">::</span><span class="fu">read_csv</span>(</span>
<span id="cb9-4"><a href="#cb9-4" aria-hidden="true" tabindex="-1"></a>  here<span class="sc">::</span><span class="fu">here</span>(<span class="st">"data"</span>, file_name)</span>
<span id="cb9-5"><a href="#cb9-5" aria-hidden="true" tabindex="-1"></a>  )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Rows: 210 Columns: 4
── Column specification ────────────────────────────────────────────────────────
Delimiter: ","
chr (3): time, name, event
dbl (1): year

ℹ Use `spec()` to retrieve the full column specification for this data.
ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.</code></pre>
</div>
</div>
<p>View its contents:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(DAT) <span class="co">#view_html(DAT)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 210 × 4
   time  name              year event  
   &lt;chr&gt; &lt;chr&gt;            &lt;dbl&gt; &lt;chr&gt;  
 1 23.29 Jocelyn Crawford  2019 50 FREE
 2 23.31 Ava Sealander     2022 50 FREE
 3 23.49 Kelly Ngo         2016 50 FREE
 4 23.71 Helen Liu         2014 50 FREE
 5 23.76 Michele Kee       2014 50 FREE
 6 23.77 Natalia Orbach-M  2020 50 FREE
 7 23.77 Suzia Starzyk     2020 50 FREE
 8 23.87 Katie Bilotti     2010 50 FREE
 9 23.93 Jenni Rinker      2011 50 FREE
10 24.02 Annika Sharma     2023 50 FREE
# ℹ 200 more rows</code></pre>
</div>
</div>
<p>We have several variables: time, name, year, event. Some appear to be numeric and some are characters. Passing the data frame to <code>dplyr::glimpse()</code> will provide more detail (see also <code>str()</code>).</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a>dplyr<span class="sc">::</span><span class="fu">glimpse</span>(DAT)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Rows: 210
Columns: 4
$ time  &lt;chr&gt; "23.29", "23.31", "23.49", "23.71", "23.76", "23.77", "23.77", "…
$ name  &lt;chr&gt; "Jocelyn Crawford", "Ava Sealander", "Kelly Ngo", "Helen Liu", "…
$ year  &lt;dbl&gt; 2019, 2022, 2016, 2014, 2014, 2020, 2020, 2010, 2011, 2023, 2016…
$ event &lt;chr&gt; "50 FREE", "50 FREE", "50 FREE", "50 FREE", "50 FREE", "50 FREE"…</code></pre>
</div>
</div>
<p>Hmm, looks like there are <code>&lt;chr&gt;</code> and <code>&lt;dbl&gt;</code> variables and some numbers are in quotes. Objects in quotes are strings. So we need to clean up the file before we can even get a summary.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="fu">is.numeric</span>(DAT<span class="sc">$</span>time)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] FALSE</code></pre>
</div>
</div>
<p>OK, so this variable is definitely not numeric. Looking at the file, we need to convert at least one variable that should be numbers from character to numeric.</p>
</section>
<section id="modifying-a-data-frame-or-tibble-using-dplyr" class="level1">
<h1><strong>Modifying a Data Frame or Tibble Using {dplyr}</strong></h1>
<p>Use <code>dplyr::mutate()</code> to create, modify, and delete column variables. At every least, you will need to pass a data frame as the first argument, <code>.data</code> and then a name-value pair as the second argument. There are other arguments that are experimental which will not be the focus of this module.</p>
<pre><code>mutate(
  .data,
  ...,
  .by = NULL,
  .keep = c("all", "used", "unused", "none"),
  .before = NULL,
  .after = NULL
)</code></pre>
<p>We will use <code>mutate()</code> in conjunction with <strong>{magrittr}</strong>’s <code>%&gt;%</code> for code piping.</p>
<section id="creating-a-new-variable" class="level2">
<h2 class="anchored" data-anchor-id="creating-a-new-variable"><strong>Creating a new variable</strong></h2>
<p>We will pass the data frame into <code>mutate()</code> and then specify a name-value variable pair. When using <code>%&gt;%</code>, the data frame piped into the function will be represented as <code>.</code>. This <code>.</code> is not needed but serves as a good reminder that the data frame that is passed is the one from the previous line of code. In order to keep the print out manageable, we will also use the <code>slice()</code> function.</p>
<pre><code>mutate(data frame, new variable name = variable) %&gt;%</code></pre>
<p>Create new variables that are set to a constant number or string:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb19"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a>DAT <span class="sc">%&gt;%</span></span>
<span id="cb19-2"><a href="#cb19-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">slice</span>(., <span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>) <span class="sc">%&gt;%</span>   <span class="co"># rows 1 through 5</span></span>
<span id="cb19-3"><a href="#cb19-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(., <span class="at">newvar1 =</span> <span class="dv">9999</span>) <span class="sc">%&gt;%</span></span>
<span id="cb19-4"><a href="#cb19-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(., <span class="at">newvar2 =</span> <span class="st">"Student"</span>) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 5 × 6
  time  name              year event   newvar1 newvar2
  &lt;chr&gt; &lt;chr&gt;            &lt;dbl&gt; &lt;chr&gt;     &lt;dbl&gt; &lt;chr&gt;  
1 23.29 Jocelyn Crawford  2019 50 FREE    9999 Student
2 23.31 Ava Sealander     2022 50 FREE    9999 Student
3 23.49 Kelly Ngo         2016 50 FREE    9999 Student
4 23.71 Helen Liu         2014 50 FREE    9999 Student
5 23.76 Michele Kee       2014 50 FREE    9999 Student</code></pre>
</div>
</div>
<p>You can see that each row in the data frame will take on the paired value.</p>
</section>
<section id="modifying-a-new-variable" class="level2">
<h2 class="anchored" data-anchor-id="modifying-a-new-variable"><strong>Modifying a new variable</strong></h2>
<p>New variables are modified using the same name-value pairing approach. When you modify a variable, you are taking an existing variable to setting it to another value.</p>
<section id="set-an-existing-variable-equal-to-a-constant" class="level3">
<h3 class="anchored" data-anchor-id="set-an-existing-variable-equal-to-a-constant"><em>Set an existing variable equal to a constant</em></h3>
<p>Just use an existing variable name (left of <code>=</code> in name-value pair).</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb21"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a>DAT <span class="sc">%&gt;%</span></span>
<span id="cb21-2"><a href="#cb21-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">slice</span>(., <span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>) <span class="sc">%&gt;%</span>   <span class="co"># rows 1 through 5</span></span>
<span id="cb21-3"><a href="#cb21-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(., <span class="at">time =</span> <span class="dv">1</span>) <span class="sc">%&gt;%</span></span>
<span id="cb21-4"><a href="#cb21-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(., <span class="at">name =</span> <span class="st">"0"</span>) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 5 × 4
   time name   year event  
  &lt;dbl&gt; &lt;chr&gt; &lt;dbl&gt; &lt;chr&gt;  
1     1 0      2019 50 FREE
2     1 0      2022 50 FREE
3     1 0      2016 50 FREE
4     1 0      2014 50 FREE
5     1 0      2014 50 FREE</code></pre>
</div>
</div>
<p>OK, that’s not very helpful. We just replaced our existing variables with nothing useful. You can see that name is still a <code>&lt;chr&gt;</code> type.</p>
</section>
<section id="set-an-existing-variable-equal-to-another-value" class="level3">
<h3 class="anchored" data-anchor-id="set-an-existing-variable-equal-to-another-value"><em>Set an existing variable equal to another value</em></h3>
<p>As long as <strong>{dplyr}</strong> can result the character elements of the vector, <code>as.numeric()</code> will convert the character strings to numbers. For example:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb23"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a><span class="fu">as.numeric</span>(<span class="fu">c</span>(<span class="st">"1"</span>, <span class="st">"3.2"</span>, <span class="st">"6.99"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 1.00 3.20 6.99</code></pre>
</div>
</div>
<p>We can illustrate in a data frame by creating character value that will serve as the constant, and use <code>as.numeric()</code> just to illustrate this example.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb25"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a>DAT <span class="sc">%&gt;%</span></span>
<span id="cb25-2"><a href="#cb25-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">slice</span>(., <span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>) <span class="sc">%&gt;%</span>   <span class="co"># rows 1 through 5</span></span>
<span id="cb25-3"><a href="#cb25-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(., <span class="at">name =</span> <span class="fu">as.numeric</span>(<span class="st">"0"</span>)) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 5 × 4
  time   name  year event  
  &lt;chr&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;chr&gt;  
1 23.29     0  2019 50 FREE
2 23.31     0  2022 50 FREE
3 23.49     0  2016 50 FREE
4 23.71     0  2014 50 FREE
5 23.76     0  2014 50 FREE</code></pre>
</div>
</div>
<p>And now <code>name</code> is a <code>&lt;dbl&gt;</code>, which is a type of numeric. We can see this by selecting columns from the data frame <code>where()</code> the variable <code>is.numeric()</code>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb27"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a>DAT <span class="sc">%&gt;%</span></span>
<span id="cb27-2"><a href="#cb27-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">slice</span>(., <span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>) <span class="sc">%&gt;%</span>   <span class="co"># rows 1 through 5</span></span>
<span id="cb27-3"><a href="#cb27-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(., <span class="at">name =</span> <span class="fu">as.numeric</span>(<span class="st">"0"</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb27-4"><a href="#cb27-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(., <span class="fu">where</span>(<span class="sc">~</span><span class="fu">is.numeric</span>(.)))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 5 × 2
   name  year
  &lt;dbl&gt; &lt;dbl&gt;
1     0  2019
2     0  2022
3     0  2016
4     0  2014
5     0  2014</code></pre>
</div>
</div>
<p>But if we try to convert <code>time</code> to numeric this way, you will see that the complex numbers will be converted to <code>NA</code>s, or missing.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb29"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb29-1"><a href="#cb29-1" aria-hidden="true" tabindex="-1"></a><span class="fu">as.numeric</span>(DAT<span class="sc">$</span>time)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: NAs introduced by coercion</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>  [1] 23.29 23.31 23.49 23.71 23.76 23.77 23.77 23.87 23.93 24.02 51.05 51.24
 [13] 51.41 51.56 51.56 51.88 52.05 52.05 52.14 52.17    NA    NA    NA    NA
 [25]    NA    NA    NA    NA    NA    NA    NA    NA    NA    NA    NA    NA
 [37]    NA    NA    NA    NA    NA    NA    NA    NA    NA    NA    NA    NA
 [49]    NA    NA    NA    NA    NA    NA    NA    NA    NA    NA    NA    NA
 [61] 55.66 55.67 55.91 56.11 56.74 56.83 57.18 57.36 57.47 57.56    NA    NA
 [73]    NA    NA    NA    NA    NA    NA    NA    NA    NA    NA    NA    NA
 [85]    NA    NA    NA    NA    NA    NA    NA    NA    NA    NA    NA    NA
 [97]    NA    NA    NA    NA 54.76 54.92 54.93 55.23 55.74 56.04 56.27 56.42
[109] 56.47 56.56    NA    NA    NA    NA    NA    NA    NA    NA    NA    NA
[121]    NA    NA    NA    NA    NA    NA    NA    NA    NA    NA 22.69 22.92
[133] 22.93 22.95 23.27 23.31 23.33 23.38 23.45 23.47 50.65 50.67 50.92 51.19
[145] 51.27 51.28 51.29 51.37 51.45 51.56    NA    NA    NA    NA    NA    NA
[157]    NA    NA    NA    NA    NA    NA    NA    NA    NA    NA    NA    NA
[169]    NA    NA 25.94 26.22 26.28 26.57 26.82 26.90 27.14 27.14 27.16 27.17
[181] 28.33 28.96 29.05 29.06 29.09 29.09 29.24 29.26 29.46 29.55 24.05 24.28
[193] 24.58 24.59 24.65 24.85 25.05 25.08 25.24 25.34 54.65 54.81 54.91 55.11
[205] 55.13 55.25 55.27 55.45 55.62 56.21</code></pre>
</div>
</div>
<p>The problem we have is that the data are not in a clean form. In this data frame, some elements of <code>time</code> are composed of numbers, decimals, and colons (e.g., x.xx, xx:xx.xx, etc.). which all make up elements that would be numbers.</p>
</section>
<section id="converting-variables-that-are-time-related-using-lubridate" class="level3">
<h3 class="anchored" data-anchor-id="converting-variables-that-are-time-related-using-lubridate"><strong>Converting variables that are time related using {lubridate}</strong></h3>
<p><strong>{lubridate}</strong> is a library for dealing with dates and times. It is also part of the <strong>tidyverse}</strong> ecosystem.</p>
<p>The <code>period_to_seconds()</code> function will convert periods to seconds depending on the period format. We need to pass to it an objec that equates to a period of seconds.</p>
<p>For <code>time</code>, the format is: hour minute second (e.g., <code>hms</code>). And there is a <code>hms()</code> function to handle this. Let’s see how it works before modifying the data frame. Load the library if it is not loaded.</p>
<p>We will pass a single character string and convert it to <code>hms</code> with <code>hms()</code> and then convert that to seconds using <code>period_to_seconds()</code>. Because 60 minutes and 1 hour is the same number of seconds, we should end up with the same values. We can also use <code>ms()</code> to convert the format into minutes and seconds and pass to <code>period_to_seconds()</code>. Following the examples, we will apply to the vector in the data frame.</p>
<pre><code>lubridate::period_to_seconds(lubridate::ms())
lubridate::period_to_seconds(lubridate::hms())</code></pre>
<p>Sixty minutes and one hour to <code>hms</code>:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb33"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb33-1"><a href="#cb33-1" aria-hidden="true" tabindex="-1"></a>lubridate<span class="sc">::</span><span class="fu">hms</span>(<span class="st">"00:60:00"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "60M 0S"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb35"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb35-1"><a href="#cb35-1" aria-hidden="true" tabindex="-1"></a>lubridate<span class="sc">::</span><span class="fu">hms</span>(<span class="st">"01:00:00"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "1H 0M 0S"</code></pre>
</div>
</div>
<p>One day to <code>hms</code>:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb37"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb37-1"><a href="#cb37-1" aria-hidden="true" tabindex="-1"></a><span class="fu">hms</span>(<span class="st">"24:00:00"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "24H 0M 0S"</code></pre>
</div>
</div>
<p>Sixty minutes and one hour to <code>hms</code> to seconds:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb39"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb39-1"><a href="#cb39-1" aria-hidden="true" tabindex="-1"></a>lubridate<span class="sc">::</span><span class="fu">period_to_seconds</span>(lubridate<span class="sc">::</span><span class="fu">hms</span>(<span class="st">"00:60:00"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 3600</code></pre>
</div>
<div class="sourceCode cell-code" id="cb41"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb41-1"><a href="#cb41-1" aria-hidden="true" tabindex="-1"></a>lubridate<span class="sc">::</span><span class="fu">period_to_seconds</span>(lubridate<span class="sc">::</span><span class="fu">hms</span>(<span class="st">"01:00:00"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 3600</code></pre>
</div>
</div>
<p>OK, good. So let’s see if we can convert <code>time</code>. Because <code>hms()</code> is passed into <code>period_to_seconds()</code>, we first need to verify that <code>hms()</code> can handle it.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb43"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb43-1"><a href="#cb43-1" aria-hidden="true" tabindex="-1"></a><span class="fu">hms</span>(DAT<span class="sc">$</span>time)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in .parse_hms(..., order = "HMS", quiet = quiet): Some strings failed
to parse, or all strings are NAs</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>  [1] NA            NA            NA            NA            NA           
  [6] NA            NA            NA            NA            NA           
 [11] NA            NA            NA            NA            NA           
 [16] NA            NA            NA            NA            NA           
 [21] "1H 50M 30S"  "1H 51M 89S"  "1H 52M 40S"  "1H 52M 55S"  "1H 52M 57S" 
 [26] "1H 52M 67S"  "1H 52M 80S"  "1H 52M 83S"  "1H 52M 88S"  "1H 52M 89S" 
 [31] "4H 57M 37S"  "4H 59M 22S"  "4H 59M 78S"  "5H 0M 6S"    "5H 0M 21S"  
 [36] "5H 0M 47S"   "5H 1M 17S"   "5H 1M 99S"   "5H 2M 16S"   "5H 2M 23S"  
 [41] "10H 14M 33S" "10H 15M 40S" "10H 22M 59S" "10H 22M 84S" "10H 24M 14S"
 [46] "10H 24M 82S" "10H 26M 34S" "10H 26M 89S" "10H 33M 15S" "10H 36M 60S"
 [51] "16H 58M 48S" "17H 3M 21S"  "17H 6M 78S"  "17H 9M 9S"   "17H 9M 26S" 
 [56] "17H 12M 18S" "17H 12M 46S" "17H 13M 58S" "17H 21M 98S" "17H 24M 49S"
 [61] NA            NA            NA            NA            NA           
 [66] NA            NA            NA            NA            NA           
 [71] "1H 59M 91S"  "2H 2M 10S"   "2H 3M 73S"   "2H 3M 85S"   "2H 3M 92S"  
 [76] "2H 5M 10S"   "2H 5M 56S"   "2H 5M 71S"   "2H 5M 76S"   "2H 6M 13S"  
 [81] "1H 1M 84S"   "1H 3M 28S"   "1H 3M 51S"   "1H 3M 91S"   "1H 4M 16S"  
 [86] "1H 4M 19S"   "1H 4M 65S"   "1H 4M 66S"   "1H 4M 77S"   "1H 4M 94S"  
 [91] "2H 14M 83S"  "2H 15M 62S"  "2H 18M 99S"  "2H 19M 6S"   "2H 19M 78S" 
 [96] "2H 20M 1S"   "2H 21M 17S"  "2H 21M 77S"  "2H 22M 34S"  "2H 22M 83S" 
[101] NA            NA            NA            NA            NA           
[106] NA            NA            NA            NA            NA           
[111] "2H 1M 84S"   "2H 2M 58S"   "2H 3M 80S"   "2H 4M 5S"    "2H 4M 42S"  
[116] "2H 4M 81S"   "2H 6M 40S"   "2H 7M 12S"   "2H 7M 33S"   "2H 7M 42S"  
[121] "2H 0M 69S"   "2H 3M 59S"   "2H 3M 79S"   "2H 4M 74S"   "2H 5M 41S"  
[126] "2H 6M 82S"   "2H 7M 12S"   "2H 7M 14S"   "2H 7M 81S"   "2H 7M 94S"  
[131] NA            NA            NA            NA            NA           
[136] NA            NA            NA            NA            NA           
[141] NA            NA            NA            NA            NA           
[146] NA            NA            NA            NA            NA           
[151] "1H 50M 91S"  "1H 50M 98S"  "1H 51M 39S"  "1H 51M 41S"  "1H 51M 56S" 
[156] "1H 51M 64S"  "1H 51M 95S"  "1H 52M 53S"  "1H 52M 78S"  "1H 53M 4S"  
[161] "4H 15M 73S"  "4H 27M 18S"  "4H 30M 33S"  "4H 30M 77S"  "4H 31M 96S" 
[166] "4H 32M 45S"  "4H 32M 57S"  "4H 32M 68S"  "4H 34M 16S"  "4H 34M 27S" 
[171] NA            NA            NA            NA            NA           
[176] NA            NA            NA            NA            NA           
[181] NA            NA            NA            NA            NA           
[186] NA            NA            NA            NA            NA           
[191] NA            NA            NA            NA            NA           
[196] NA            NA            NA            NA            NA           
[201] NA            NA            NA            NA            NA           
[206] NA            NA            NA            NA            NA           </code></pre>
</div>
</div>
<p>Yikes! Note the warning and look at the output. Some strings failed and turned to <code>NA</code>. Looking and the <code>time</code> vector again, we see that contains both values like <code>1:52.83</code> and <code>23.87</code>. If there is only one <code>:</code>, we should be able to use <code>ms()</code>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb46"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb46-1"><a href="#cb46-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ms</span>(DAT<span class="sc">$</span>time)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  [1] "23M 29S"    "23M 31S"    "23M 49S"    "23M 71S"    "23M 76S"   
  [6] "23M 77S"    "23M 77S"    "23M 87S"    "23M 93S"    "24M 2S"    
 [11] "51M 5S"     "51M 24S"    "51M 41S"    "51M 56S"    "51M 56S"   
 [16] "51M 88S"    "52M 5S"     "52M 5S"     "52M 14S"    "52M 17S"   
 [21] "1M 50.3S"   "1M 51.89S"  "1M 52.4S"   "1M 52.55S"  "1M 52.57S" 
 [26] "1M 52.67S"  "1M 52.8S"   "1M 52.83S"  "1M 52.88S"  "1M 52.89S" 
 [31] "4M 57.37S"  "4M 59.22S"  "4M 59.78S"  "5M 0.06S"   "5M 0.21S"  
 [36] "5M 0.47S"   "5M 1.17S"   "5M 1.99S"   "5M 2.16S"   "5M 2.23S"  
 [41] "10M 14.33S" "10M 15.4S"  "10M 22.59S" "10M 22.84S" "10M 24.14S"
 [46] "10M 24.82S" "10M 26.34S" "10M 26.89S" "10M 33.15S" "10M 36.6S" 
 [51] "16M 58.48S" "17M 3.21S"  "17M 6.78S"  "17M 9.09S"  "17M 9.26S" 
 [56] "17M 12.18S" "17M 12.46S" "17M 13.58S" "17M 21.98S" "17M 24.49S"
 [61] "55M 66S"    "55M 67S"    "55M 91S"    "56M 11S"    "56M 74S"   
 [66] "56M 83S"    "57M 18S"    "57M 36S"    "57M 47S"    "57M 56S"   
 [71] "1M 59.91S"  "2M 2.1S"    "2M 3.73S"   "2M 3.85S"   "2M 3.92S"  
 [76] "2M 5.1S"    "2M 5.56S"   "2M 5.71S"   "2M 5.76S"   "2M 6.13S"  
 [81] "1M 1.84S"   "1M 3.28S"   "1M 3.51S"   "1M 3.91S"   "1M 4.16S"  
 [86] "1M 4.19S"   "1M 4.65S"   "1M 4.66S"   "1M 4.77S"   "1M 4.94S"  
 [91] "2M 14.83S"  "2M 15.62S"  "2M 18.99S"  "2M 19.06S"  "2M 19.78S" 
 [96] "2M 20.01S"  "2M 21.17S"  "2M 21.77S"  "2M 22.34S"  "2M 22.83S" 
[101] "54M 76S"    "54M 92S"    "54M 93S"    "55M 23S"    "55M 74S"   
[106] "56M 4S"     "56M 27S"    "56M 42S"    "56M 47S"    "56M 56S"   
[111] "2M 1.84S"   "2M 2.58S"   "2M 3.8S"    "2M 4.05S"   "2M 4.42S"  
[116] "2M 4.81S"   "2M 6.4S"    "2M 7.12S"   "2M 7.33S"   "2M 7.42S"  
[121] "2M 0.69S"   "2M 3.59S"   "2M 3.79S"   "2M 4.74S"   "2M 5.41S"  
[126] "2M 6.82S"   "2M 7.12S"   "2M 7.14S"   "2M 7.81S"   "2M 7.94S"  
[131] "22M 69S"    "22M 92S"    "22M 93S"    "22M 95S"    "23M 27S"   
[136] "23M 31S"    "23M 33S"    "23M 38S"    "23M 45S"    "23M 47S"   
[141] "50M 65S"    "50M 67S"    "50M 92S"    "51M 19S"    "51M 27S"   
[146] "51M 28S"    "51M 29S"    "51M 37S"    "51M 45S"    "51M 56S"   
[151] "1M 50.91S"  "1M 50.98S"  "1M 51.39S"  "1M 51.41S"  "1M 51.56S" 
[156] "1M 51.64S"  "1M 51.95S"  "1M 52.53S"  "1M 52.78S"  "1M 53.04S" 
[161] "4M 15.73S"  "4M 27.18S"  "4M 30.33S"  "4M 30.77S"  "4M 31.96S" 
[166] "4M 32.45S"  "4M 32.57S"  "4M 32.68S"  "4M 34.16S"  "4M 34.27S" 
[171] "25M 94S"    "26M 22S"    "26M 28S"    "26M 57S"    "26M 82S"   
[176] "26M 90S"    "27M 14S"    "27M 14S"    "27M 16S"    "27M 17S"   
[181] "28M 33S"    "28M 96S"    "29M 5S"     "29M 6S"     "29M 9S"    
[186] "29M 9S"     "29M 24S"    "29M 26S"    "29M 46S"    "29M 55S"   
[191] "24M 5S"     "24M 28S"    "24M 58S"    "24M 59S"    "24M 65S"   
[196] "24M 85S"    "25M 5S"     "25M 8S"     "25M 24S"    "25M 34S"   
[201] "54M 65S"    "54M 81S"    "54M 91S"    "55M 11S"    "55M 13S"   
[206] "55M 25S"    "55M 27S"    "55M 45S"    "55M 62S"    "56M 21S"   </code></pre>
</div>
</div>
<p>Great! All elements are in the form of <code>"xxM XXs"</code>. But does <strong>{lubridate}</strong> also convert seconds to a numeric value when using <code>period_to_seconds()</code>? If loaded, we can also remove the name of the library when calling the functions.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb48"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb48-1"><a href="#cb48-1" aria-hidden="true" tabindex="-1"></a><span class="fu">is.numeric</span>(<span class="fu">period_to_seconds</span>(<span class="fu">ms</span>(DAT<span class="sc">$</span>time)))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] TRUE</code></pre>
</div>
</div>
<p>So let’s go ahead and modify the character vector named <code>time</code> to a numeric vector representing seconds.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb50"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb50-1"><a href="#cb50-1" aria-hidden="true" tabindex="-1"></a><span class="fu">period_to_seconds</span>(<span class="fu">ms</span>(DAT<span class="sc">$</span>time))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  [1] 1409.00 1411.00 1429.00 1451.00 1456.00 1457.00 1457.00 1467.00 1473.00
 [10] 1442.00 3065.00 3084.00 3101.00 3116.00 3116.00 3148.00 3125.00 3125.00
 [19] 3134.00 3137.00  110.30  111.89  112.40  112.55  112.57  112.67  112.80
 [28]  112.83  112.88  112.89  297.37  299.22  299.78  300.06  300.21  300.47
 [37]  301.17  301.99  302.16  302.23  614.33  615.40  622.59  622.84  624.14
 [46]  624.82  626.34  626.89  633.15  636.60 1018.48 1023.21 1026.78 1029.09
 [55] 1029.26 1032.18 1032.46 1033.58 1041.98 1044.49 3366.00 3367.00 3391.00
 [64] 3371.00 3434.00 3443.00 3438.00 3456.00 3467.00 3476.00  119.91  122.10
 [73]  123.73  123.85  123.92  125.10  125.56  125.71  125.76  126.13   61.84
 [82]   63.28   63.51   63.91   64.16   64.19   64.65   64.66   64.77   64.94
 [91]  134.83  135.62  138.99  139.06  139.78  140.01  141.17  141.77  142.34
[100]  142.83 3316.00 3332.00 3333.00 3323.00 3374.00 3364.00 3387.00 3402.00
[109] 3407.00 3416.00  121.84  122.58  123.80  124.05  124.42  124.81  126.40
[118]  127.12  127.33  127.42  120.69  123.59  123.79  124.74  125.41  126.82
[127]  127.12  127.14  127.81  127.94 1389.00 1412.00 1413.00 1415.00 1407.00
[136] 1411.00 1413.00 1418.00 1425.00 1427.00 3065.00 3067.00 3092.00 3079.00
[145] 3087.00 3088.00 3089.00 3097.00 3105.00 3116.00  110.91  110.98  111.39
[154]  111.41  111.56  111.64  111.95  112.53  112.78  113.04  255.73  267.18
[163]  270.33  270.77  271.96  272.45  272.57  272.68  274.16  274.27 1594.00
[172] 1582.00 1588.00 1617.00 1642.00 1650.00 1634.00 1634.00 1636.00 1637.00
[181] 1713.00 1776.00 1745.00 1746.00 1749.00 1749.00 1764.00 1766.00 1786.00
[190] 1795.00 1445.00 1468.00 1498.00 1499.00 1505.00 1525.00 1505.00 1508.00
[199] 1524.00 1534.00 3305.00 3321.00 3331.00 3311.00 3313.00 3325.00 3327.00
[208] 3345.00 3362.00 3381.00</code></pre>
</div>
</div>
<p>Perfect! Let’s <code>mutate()</code> that variable in the data frame.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb52"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb52-1"><a href="#cb52-1" aria-hidden="true" tabindex="-1"></a>DAT <span class="sc">%&gt;%</span></span>
<span id="cb52-2"><a href="#cb52-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">slice</span>(., <span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>) <span class="sc">%&gt;%</span>   <span class="co"># rows 1 through 5</span></span>
<span id="cb52-3"><a href="#cb52-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(., <span class="at">time =</span> <span class="fu">period_to_seconds</span>(<span class="fu">ms</span>(time)))  </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 5 × 4
   time name              year event  
  &lt;dbl&gt; &lt;chr&gt;            &lt;dbl&gt; &lt;chr&gt;  
1  1409 Jocelyn Crawford  2019 50 FREE
2  1411 Ava Sealander     2022 50 FREE
3  1429 Kelly Ngo         2016 50 FREE
4  1451 Helen Liu         2014 50 FREE
5  1456 Michele Kee       2014 50 FREE</code></pre>
</div>
</div>
<p>Let’s look at <code>DAT</code> now and see those seconds.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb54"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb54-1"><a href="#cb54-1" aria-hidden="true" tabindex="-1"></a>DAT</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 210 × 4
   time  name              year event  
   &lt;chr&gt; &lt;chr&gt;            &lt;dbl&gt; &lt;chr&gt;  
 1 23.29 Jocelyn Crawford  2019 50 FREE
 2 23.31 Ava Sealander     2022 50 FREE
 3 23.49 Kelly Ngo         2016 50 FREE
 4 23.71 Helen Liu         2014 50 FREE
 5 23.76 Michele Kee       2014 50 FREE
 6 23.77 Natalia Orbach-M  2020 50 FREE
 7 23.77 Suzia Starzyk     2020 50 FREE
 8 23.87 Katie Bilotti     2010 50 FREE
 9 23.93 Jenni Rinker      2011 50 FREE
10 24.02 Annika Sharma     2023 50 FREE
# ℹ 200 more rows</code></pre>
</div>
</div>
<p>The data frame has not changed. The final step is to assign assign the returned data frame to an object. Remove the <code>slice()</code> so we get the entire data frame.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb56"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb56-1"><a href="#cb56-1" aria-hidden="true" tabindex="-1"></a>DAT <span class="ot">&lt;-</span> DAT <span class="sc">%&gt;%</span></span>
<span id="cb56-2"><a href="#cb56-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(., <span class="at">time =</span> <span class="fu">period_to_seconds</span>(<span class="fu">ms</span>(time)))  </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Now let’s write this to <code>/data</code>. But we don’t want to overwrite this file. <strong>{here}</strong> won’t be as effective but we can concatenate the <code>file_name</code> string object with a prefix like <code>"cleaned"</code> using the <code>paste()</code> function in <code>base R</code>. We will add a hyphen, <code>-</code>, by passing it to the <code>sep</code> argument.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb57"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb57-1"><a href="#cb57-1" aria-hidden="true" tabindex="-1"></a><span class="fu">paste</span>(<span class="st">"cleaned"</span>, file_name, <span class="at">sep =</span> <span class="st">"-"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "cleaned-cms-top-all-time-2023-swim.csv"</code></pre>
</div>
</div>
<p>When paired with <code>here::here()</code>, does the full file path look right?</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb59"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb59-1"><a href="#cb59-1" aria-hidden="true" tabindex="-1"></a>here<span class="sc">::</span><span class="fu">here</span>(<span class="st">"data"</span>, <span class="fu">paste</span>(<span class="st">"cleaned"</span>, file_name, <span class="at">sep =</span> <span class="st">"-"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "C:/Users/gcook/Sync/git/dataviz23/data/cleaned-cms-top-all-time-2023-swim.csv"</code></pre>
</div>
</div>
<p>Got our new file name! Let’s write!</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb61"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb61-1"><a href="#cb61-1" aria-hidden="true" tabindex="-1"></a>readr<span class="sc">::</span><span class="fu">write_csv</span>(DAT, here<span class="sc">::</span><span class="fu">here</span>(<span class="st">"data"</span>, <span class="fu">paste</span>(<span class="st">"cleaned"</span>, file_name, <span class="at">sep =</span> <span class="st">"-"</span>)))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Done!</p>
</section>
</section>
</section>
<section id="quick-summary-using-base-r" class="level1">
<h1><strong>Quick Summary Using <code>base R</code></strong></h1>
<p>If you want a quick summary of data, <code>summary()</code> will provide some basic information for you. You can pass a data frame to the function.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb62"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb62-1"><a href="#cb62-1" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(DAT)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>      time             name                year         event          
 Min.   :  61.84   Length:210         Min.   :1997   Length:210        
 1st Qu.: 126.89   Class :character   1st Qu.:2014   Class :character  
 Median :1030.72   Mode  :character   Median :2018   Mode  :character  
 Mean   :1290.03                      Mean   :2017                     
 3rd Qu.:1773.50                      3rd Qu.:2022                     
 Max.   :3476.00                      Max.   :2023                     </code></pre>
</div>
</div>
</section>
<section id="summarizing-data-using-dplyr" class="level1">
<h1><strong>Summarizing Data Using {dplyr}</strong></h1>
<p>more to come</p>


</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->



</body></html>